<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New York City dog licenses and bite incidents by zip code • nycdogs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="New York City dog licenses and bite incidents by zip code">
<meta property="og:description" content="A data package containing three data sets covering dog ownership in New York City.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">nycdogs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kjhealy/nycdogs" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="nycdogs-">nycdogs <img src="reference/figures/nycdogs.png" align="right" width="240"><a class="anchor" aria-label="anchor" href="#nycdogs-"></a>
</h1></div>
<!-- badges: start -->

<p>The <code>nycdogs</code> package contains three datasets, <code>nyc_license</code>, <code>nyc_bites</code>, and <code>nyc_zips</code>. They contain, respectively, data on all licensed dogs in New York city, data on reported dog bites in New York city, and geographical data for New York city at the zip code level.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>nycdogs</code> is a data package, bundling several datasets into a convenient format. The relatively large size of the data in the package means it is not suitable for hosting on <a href="https://cran.r-project.org/" class="external-link">CRAN</a>, the core R package repository. There are two ways to install it.</p>
<div class="section level3">
<h3 id="install-direct-from-github">Install direct from GitHub<a class="anchor" aria-label="anchor" href="#install-direct-from-github"></a>
</h3>
<p>You can install the beta version of nycdogs from <a href="https://github.com/kjhealy/nycdogs" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"kjhealy/nycdogs"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="installation-using-drat">Installation using <code>drat</code>
<a class="anchor" aria-label="anchor" href="#installation-using-drat"></a>
</h3>
<p>While using <code>install_github()</code> works just fine, it would be nicer to be able to just type <code>install.packages("nycdogs")</code> or <code>update.packages("nycdogs")</code> in the ordinary way. We can do this using Dirk Eddelbuettel’s <a href="http://eddelbuettel.github.io/drat/DratForPackageUsers.html" class="external-link">drat</a> package. Drat provides a convenient way to make R aware of package repositories other than CRAN.</p>
<p>First, install <code>drat</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/eddelbuettel/drat" class="external-link">"drat"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"drat"</span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/eddelbuettel/drat" class="external-link">"drat"</a></span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Then use <code>drat</code> to tell R about the repository where <code>nycdogs</code> is hosted:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">drat</span><span class="fu">::</span><span class="fu">addRepo</span><span class="op">(</span><span class="st">"kjhealy"</span><span class="op">)</span></code></pre></div>
<p>You can now install <code>nycdogs</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"nycdogs"</span><span class="op">)</span></code></pre></div>
<p>To ensure that the <code>nycdogs</code> repository is always available, you can add the following line to your <code>.Rprofile</code> or <code>.Rprofile.site</code> file:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">drat</span><span class="fu">::</span><span class="fu">addRepo</span><span class="op">(</span><span class="st">"kjhealy"</span><span class="op">)</span></code></pre></div>
<p>With that in place you’ll be able to do <code>install.packages("nycdogs")</code> or <code>update.packages("nycdogs")</code> and have everything work as you’d expect.</p>
<p>Note that the drat repository only contains data packages that are not on CRAN, so you will never be in danger of grabbing the wrong version of any other package.</p>
</div>
</div>
<div class="section level2">
<h2 id="loading-the-data">Loading the data<a class="anchor" aria-label="anchor" href="#loading-the-data"></a>
</h2>
<p>The package works best with the <a href="http://tidyverse.org/" class="external-link">tidyverse</a> libraries and the <a href="https://r-spatial.github.io/sf/index.html" class="external-link">simple features</a> package for mapping.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span>
<span class="co">#&gt; Linking to GEOS 3.7.2, GDAL 2.4.2, PROJ 5.2.0</span></code></pre></div>
<p>Load the data:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kjhealy/nycdogs" class="external-link">nycdogs</a></span><span class="op">)</span></code></pre></div>
<p>To look at the tibble that contains the licensing data, do this:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nyc_license</span>
<span class="co">#&gt; # A tibble: 122,203 x 14</span>
<span class="co">#&gt;    animal_name animal_gender animal_birth_mo… breed_rc borough zip_code</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;         &lt;date&gt;           &lt;chr&gt;    &lt;chr&gt;      &lt;int&gt;</span>
<span class="co">#&gt;  1 Shadow      M             2000-01-01       Beagle   Brookl…    11236</span>
<span class="co">#&gt;  2 Rocco       M             2011-10-01       Boxer    Brookl…    11210</span>
<span class="co">#&gt;  3 Luigi       M             2005-09-01       Maltese  Bronx      10464</span>
<span class="co">#&gt;  4 Petunia     F             2013-08-01       Pug      Brookl…    11221</span>
<span class="co">#&gt;  5 Romeo       M             2008-10-01       Maltese  Bronx      10451</span>
<span class="co">#&gt;  6 Brandy      M             2004-01-01       Unknown  Brookl…    11225</span>
<span class="co">#&gt;  7 Sam         M             2011-05-01       Pug      Manhat…    10021</span>
<span class="co">#&gt;  8 May         F             2004-05-01       Unknown  Staten…    10305</span>
<span class="co">#&gt;  9 Ruby        F             2010-04-01       Boxer    Brookl…    11220</span>
<span class="co">#&gt; 10 Leo         M             2014-01-01       Beagle   Bronx      10468</span>
<span class="co">#&gt; # … with 122,193 more rows, and 8 more variables:</span>
<span class="co">#&gt; #   community_district &lt;dbl&gt;, census_tract2010 &lt;dbl&gt;, nta &lt;chr&gt;,</span>
<span class="co">#&gt; #   city_council_district &lt;dbl&gt;, congressional_district &lt;dbl&gt;,</span>
<span class="co">#&gt; #   state_senatorial_district &lt;dbl&gt;, license_issued_date &lt;date&gt;,</span>
<span class="co">#&gt; #   license_expired_date &lt;date&gt;</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>You can use the <code>nyc_zips</code> object to create a map of, for example, the prevalence of dog names by zip code:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">nyc_coco</span> <span class="op">&lt;-</span> <span class="va">nyc_license</span> <span class="op">%&gt;%</span>
    <span class="fu">group_by</span><span class="op">(</span><span class="va">zip_code</span>, <span class="va">animal_name</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">tally</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">mutate</span><span class="op">(</span>freq <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,
           pct <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">freq</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">animal_name</span> <span class="op">==</span> <span class="st">"Coco"</span><span class="op">)</span>

<span class="va">nyc_coco</span>
<span class="co">#&gt; # A tibble: 170 x 5</span>
<span class="co">#&gt; # Groups:   zip_code [170]</span>
<span class="co">#&gt;    zip_code animal_name     n    freq   pct</span>
<span class="co">#&gt;       &lt;int&gt; &lt;chr&gt;       &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1    10001 Coco            9 0.00994  0.99</span>
<span class="co">#&gt;  2    10002 Coco            7 0.00617  0.62</span>
<span class="co">#&gt;  3    10003 Coco            6 0.00389  0.39</span>
<span class="co">#&gt;  4    10004 Coco            1 0.00752  0.75</span>
<span class="co">#&gt;  5    10005 Coco            1 0.00346  0.35</span>
<span class="co">#&gt;  6    10007 Coco            5 0.0243   2.43</span>
<span class="co">#&gt;  7    10009 Coco            9 0.00427  0.43</span>
<span class="co">#&gt;  8    10010 Coco            9 0.00783  0.78</span>
<span class="co">#&gt;  9    10011 Coco           12 0.00537  0.54</span>
<span class="co">#&gt; 10    10012 Coco            2 0.00234  0.23</span>
<span class="co">#&gt; # … with 160 more rows</span>

<span class="va">coco_map</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">nyc_zips</span>, <span class="va">nyc_coco</span><span class="op">)</span>
<span class="co">#&gt; Joining, by = "zip_code"</span>

<span class="co">## Map theme</span>
<span class="va">theme_nymap</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">base_size</span><span class="op">=</span><span class="fl">9</span>, <span class="va">base_family</span><span class="op">=</span><span class="st">""</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span>
    <span class="fu">theme_bw</span><span class="op">(</span>base_size<span class="op">=</span><span class="va">base_size</span>, base_family<span class="op">=</span><span class="va">base_family</span><span class="op">)</span> <span class="op">%+replace%</span>
        <span class="fu">theme</span><span class="op">(</span>axis.line<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
              axis.text<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
              axis.ticks<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
              axis.title<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
              panel.background<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
              panel.border<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
              panel.grid<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
              panel.spacing<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>, <span class="st">"lines"</span><span class="op">)</span>,
              plot.background<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
              legend.justification <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,
              legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.6</span><span class="op">)</span>, 
              legend.direction <span class="op">=</span> <span class="st">"horizontal"</span>
        <span class="op">)</span>
<span class="op">}</span>

<span class="va">coco_map</span> <span class="op">%&gt;%</span> <span class="fu">ggplot</span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_sf</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray80"</span>, size <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_fill_viridis_c</span><span class="op">(</span>option <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"Percent of Licensed Dogs"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">annotate</span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"text"</span>, x <span class="op">=</span> <span class="op">-</span><span class="fl">74.145</span>, y <span class="op">=</span> <span class="fl">40.82</span>, 
           label <span class="op">=</span> <span class="st">"Where's Coco?"</span>, size <span class="op">=</span> <span class="fl">6</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">theme_nymap</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">guides</span><span class="op">(</span>fill <span class="op">=</span> <span class="fu">guide_legend</span><span class="op">(</span>title.position <span class="op">=</span> <span class="st">"top"</span>, 
                               label.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span><span class="op">)</span> </code></pre></div>
<p><img src="reference/figures/README-mapexample-1.png" title="plot of chunk mapexample" alt="plot of chunk mapexample" width="100%"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/kjhealy/nycdogs/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/kjhealy/nycdogs/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing nycdogs</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://kieranhealy.org" class="external-link">Kieran Healy</a> <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/kjhealy/nycdogs" class="external-link"><img src="https://travis-ci.org/kjhealy/nycdogs.svg?branch=master" alt="Travis build status"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="http://kieranhealy.org" class="external-link">Kieran Healy</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
